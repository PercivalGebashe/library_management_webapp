<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Library Management</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<div class="container">
<!-- Sidebar Section -->
    <aside class="sidebar">
        <h3>Filter Books</h3>
        <label for="filterTitle">Title:</label>
        <input type="text" id="filterTitle">

        <label for="filterAuthor">Author:</label>
        <select id="filterAuthor">
            <option value="">Select an Author</option>
        </select>

        <label for="filterGenre">Genre:</label>
        <input type="text" id="filterGenre">

        <label>Publication Date:</label>
        <input type="date" id="startDate">
        <input type="date" id="endDate">

        <button id="applyFiltersBtn">Apply Filters</button>
    </aside>


    <!-- Main Content Section -->
    <div class="main-content">
        <!--Page heading -->
        <h1>Library Management</h1>

        <!-- Buttons for Adding Books and Authors (Only for Admins) -->
        <div class="admin-actions">
            <button id="addBookBtn">Add Book</button>
            <button id="addAuthorBtn">Add Author</button>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <!-- Basic Search -->
            <div class="search-container">
                <form id="searchForm">
                    <select id="searchType">
                        <option value="searchTitle">Book Name</option>
                        <option value="searchId">Book ID</option>
                        <option value="searchIsbn">ISBN</option>
                        <option value="searchGenre">Genre</option>
                    </select>
                    <input type="text" id="searchInput" placeholder="Search...">
                    <button id="searchSubmitBtn" type="submit">Search</button>
                </form>
            </div>
        </div>

        <!-- Table Section -->
        <div class="table-section">
            <div class="grid-table">
                <div class="grid-header">
                    <div>ID</div>
                    <div>Title</div>
                    <div>Author</div>
                    <div>Description</div>
                    <div>Genres</div>
                    <div>Publish Date</div>
                    <div>Publisher</div>
                    <div>ISBN</div>
                    <div>Actions</div>
                </div>
                <div id="booksContainer" class="grid-body">
                    <!-- dynamically load book data -->
                </div>
            </div>
        </div>

        <!-- Pagination Section -->
        <div class="pagination-section">
            <div id="pagination"></div>
        </div>
    </div>
</div>

<!-- Edit Modal (Only for Admins) -->
<div id="editModal" class="modal" >
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Edit Book</h2>
        <form id="editForm">
            <label>ID:</label>
            <input type="text" id="editModalId" name="id" readonly>

            <label>Title:</label>
            <input type="text" id="editModalTitle" name="title">

            <label>Author(s):</label>
            <input type="text" id="editModalAuthors" name="authors">

            <label>Description:</label>
            <input type="text" id="editModalDescription" name="description">

            <label>Genre(s):</label>
            <input type="text" id="editModalGenres" name="genres">

            <label>Publish Date:</label>
            <input type="date" id="editModalPublishedDate" name="publishedDate" readonly>

            <label>Publisher(s):</label>
            <input type="text" id="editModalPublishers" name="publishers">

            <label>ISBN:</label>
            <input type="text" id="editModalIsbn" name="isbn" readonly>

            <button type="submit" class="editModalSubmitBtn" id="editModalSubmitBtn" name="editModalSubmitBtn">
                Save
            </button>
        </form>
    </div>
</div>


<!-- Add New Book Modal -->
<div id="addBookModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Add New Book</h2>
        <form id="addBookForm">
            <label>Title:</label>
            <input type="text" id="addBookTitle" name="title" required>

            <label>Author(s):</label>
            <input type="text" id="addBookAuthors" name="authors">

            <label>Description:</label>
            <input type="text" id="addBookDescription" name="description" required>

            <label>Genre(s):</label>
            <input type="text" id="addBookGenres" name="genres" required>

            <label>Publish Date:</label>
            <input type="date" id="addBookPublishedDate" name="publishedDate" required>

            <label>Publisher(s):</label>
            <input type="text" id="addBookPublishers" name="publishers" required>

            <label>ISBN:</label>
            <input type="text" id="addBookIsbn" name="isbn" required>

            <button type="submit" id="addBookSubmitBtn">Add Book</button>
        </form>
    </div>
</div>

<!-- View Book Details Modal -->
<div id="bookDetailsModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeBookModal()">&times;</span>
        <h2 id="bDModalTitle"></h2>
        <img id="bDModalImage" src="" alt="Book Cover" >
        <p><strong>Author(s):</strong> <span id="bDModalAuthors"></span></p>
        <p><strong>Description:</strong> <span id="bDModalDescription"></span></p>
        <p><strong>Genre(s):</strong> <span id="bDModalGenres"></span></p>
        <p><strong>Publish Date:</strong> <span id="bDModalPublishedDate"></span></p>
        <p><strong>Publisher(s):</strong> <span id="bDModalPublishers"></span></p>
        <p><strong>ISBN:</strong> <span id="bDModalIsbn"></span></p>
    </div>
</div>

<!-- Add New Author Modal -->
<div id="addAuthorModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeAddAuthorModal()">&times;</span>
        <h2>Add New Author</h2>
        <form id="addAuthorForm">
            <label>Author Name:</label>
            <input type="text" id="addAuthorName" name="name" required>

            <label>Date of Birth:</label>
            <input type="date" id="addAuthorDob" name="dob" required>

            <label>Biography:</label>
            <textarea id="addAuthorBio" name="bio" required></textarea>

            <button type="submit" id="addAuthorSubmitBtn">Add Author</button>
        </form>
    </div>
</div>

<script th:type="module" th:src="@{/js/main.js?v=1.0}" th:defer></script>
</body>
</html>