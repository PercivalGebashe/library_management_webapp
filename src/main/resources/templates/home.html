<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Library Management</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<h1>Library Management</h1>

<!-- Search Bar -->
<div class="search-container">
    <form id="searchForm">
        <select id="searchType">
            <option value="title">Book Name</option>
            <option value="id">Book ID</option>
            <option value="isbn">ISBN</option>
            <option value="genre">Genre</option>
        </select>
        <input type="text" id="searchInput" placeholder="Search...">
        <button type="submit">Search</button>
    </form>
</div>

<!-- Sidebar for Filters -->
<aside class="sidebar">
    <h3>Filter Books</h3>

    <label for="filterTitle">Title:</label>
    <input type="text" id="filterTitle">

    <label for="filterAuthor">Author:</label>
    <select id="filterAuthor">
        <option value="">Select an Author</option>
    </select>

    <label for="filterGenre">Genre:</label>
    <input type="text" id="filterGenre">

    <label>Publication Date:</label>
    <input type="date" id="startDate">
    <input type="date" id="endDate">

    <button id="applyFiltersBtn">Apply Filters</button>

    <h3>Author Details</h3>
    <div id="authorDetails"></div>
</aside>

<!-- Book Table -->
<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Author</th>
        <th>Description</th>
        <th>Genres</th>
        <th>Publish Date</th>
        <th>Publisher</th>
        <th>ISBN</th>
        <th th:if="${role == 'ADMIN'}">Action</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<!-- Pagination Controls -->
<div id="pagination"></div>

<!-- Edit Modal (Only for Admins) -->
<div id="editModal" class="modal" th:if="${role == 'ADMIN'}">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Edit Book</h2>
        <form id="editForm">
            <label>ID:</label>
            <input type="text" id="id" name="id" readonly>

            <label>Title:</label>
            <input type="text" id="title" name="title">

            <label>Author(s):</label>
            <input type="text" id="authors" name="authors">

            <label>Description:</label>
            <input type="text" id="description" name="description">

            <label>Genre(s):</label>
            <input type="text" id="genres" name="genres">

            <label>Publish Date:</label>
            <input type="date" id="publishedDate" name="publishedDate" readonly>

            <label>Publisher(s):</label>
            <input type="text" id="publishers" name="publishers">

            <label>ISBN:</label>
            <input type="text" id="isbn" name="isbn" readonly>

            <button type="submit">Save</button>
        </form>
    </div>
</div>

<script th:type="module" th:src="@{/js/main.js?v=1.0}" th:defer></script>
</body>
</html>